"use strict";(globalThis.webpackChunkai_robotics_textbook=globalThis.webpackChunkai_robotics_textbook||[]).push([[541],{2690:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>u});var i=s(4848),o=s(8453),t=s(1226),r=s(5783);const a={sidebar_position:3,title:"ROS 2 Nodes and Topics"},l="ROS 2 Nodes and Topics",c={id:"module-1-ros2/topic-2",title:"ROS 2 Nodes and Topics",description:"In ROS 2, nodes are the fundamental building blocks of a robotic application. Nodes communicate with each other using topics, which implement a publish-subscribe communication pattern. Understanding nodes and topics is essential for building distributed robotic systems.",source:"@site/docs/module-1-ros2/topic-2.mdx",sourceDirName:"module-1-ros2",slug:"/module-1-ros2/topic-2",permalink:"/hackthon/docs/module-1-ros2/topic-2",draft:!1,unlisted:!1,editUrl:"https://github.com/nehaltariq357/hackthon/tree/master/docs/module-1-ros2/topic-2.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"ROS 2 Nodes and Topics"},sidebar:"textbookSidebar",previous:{title:"Introduction to ROS 2 Architecture",permalink:"/hackthon/docs/module-1-ros2/topic-1"},next:{title:"ROS 2 Services and Actions",permalink:"/hackthon/docs/module-1-ros2/topic-3"}},d={},u=[{value:"Understanding Nodes",id:"understanding-nodes",level:2},{value:"Topic Communication",id:"topic-communication",level:2},{value:"Quality of Service (QoS) Settings",id:"quality-of-service-qos-settings",level:3},{value:"Launch Files",id:"launch-files",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Summary",id:"summary",level:2}];function m(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.A,{}),"\n",(0,i.jsx)(n.h1,{id:"ros-2-nodes-and-topics",children:"ROS 2 Nodes and Topics"}),"\n",(0,i.jsx)(n.p,{children:"In ROS 2, nodes are the fundamental building blocks of a robotic application. Nodes communicate with each other using topics, which implement a publish-subscribe communication pattern. Understanding nodes and topics is essential for building distributed robotic systems."}),"\n",(0,i.jsx)(n.h2,{id:"understanding-nodes",children:"Understanding Nodes"}),"\n",(0,i.jsx)(n.p,{children:"A node is a process that performs computation. In ROS 2, nodes are designed to be modular and focused on a single task. Here's a more complex example of a ROS 2 node:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="sensor_fusion_node.py"',children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import LaserScan, Imu\nfrom geometry_msgs.msg import Twist\n\nclass SensorFusionNode(Node):\n    def __init__(self):\n        super().__init__('sensor_fusion_node')\n\n        # Create subscribers for different sensor topics\n        self.laser_subscription = self.create_subscription(\n            LaserScan,\n            'scan',\n            self.laser_callback,\n            10)\n        self.laser_subscription  # prevent unused variable warning\n\n        self.imu_subscription = self.create_subscription(\n            Imu,\n            'imu/data',\n            self.imu_callback,\n            10)\n        self.imu_subscription  # prevent unused variable warning\n\n        # Create publisher for movement commands\n        self.cmd_vel_publisher = self.create_publisher(Twist, 'cmd_vel', 10)\n\n        # Timer for processing data\n        self.timer = self.create_timer(0.1, self.process_data)\n\n        # Data storage\n        self.laser_data = None\n        self.imu_data = None\n\n    def laser_callback(self, msg):\n        self.laser_data = msg\n        self.get_logger().info(f'Laser data received: {len(msg.ranges)} ranges')\n\n    def imu_callback(self, msg):\n        self.imu_data = msg\n        self.get_logger().info('IMU data received')\n\n    def process_data(self):\n        if self.laser_data is not None and self.imu_data is not None:\n            # Simple obstacle avoidance based on laser data\n            cmd_msg = Twist()\n\n            # Check for obstacles in front\n            front_ranges = self.laser_data.ranges[330:30] + self.laser_data.ranges[330:]\n            min_distance = min([r for r in front_ranges if r > 0.0], default=float('inf'))\n\n            if min_distance < 1.0:  # Obstacle within 1 meter\n                cmd_msg.linear.x = 0.0\n                cmd_msg.angular.z = 0.5  # Turn right\n            else:\n                cmd_msg.linear.x = 0.5  # Move forward\n                cmd_msg.angular.z = 0.0\n\n            self.cmd_vel_publisher.publish(cmd_msg)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    sensor_fusion_node = SensorFusionNode()\n\n    try:\n        rclpy.spin(sensor_fusion_node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        sensor_fusion_node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"topic-communication",children:"Topic Communication"}),"\n",(0,i.jsx)(n.p,{children:"Topics implement a publish-subscribe communication pattern where publishers send messages to a topic and subscribers receive messages from the topic. This enables loose coupling between nodes."}),"\n",(0,i.jsx)(n.h3,{id:"quality-of-service-qos-settings",children:"Quality of Service (QoS) Settings"}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 provides Quality of Service settings to configure communication behavior:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="qos_examples.py"',children:"from rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy\n\n# Reliable communication (messages guaranteed to be delivered)\nreliable_qos = QoSProfile(\n    depth=10,\n    reliability=ReliabilityPolicy.RELIABLE,\n    durability=DurabilityPolicy.VOLATILE\n)\n\n# Best effort communication (faster but no delivery guarantee)\nbest_effort_qos = QoSProfile(\n    depth=10,\n    reliability=ReliabilityPolicy.BEST_EFFORT,\n    durability=DurabilityPolicy.VOLATILE\n)\n\n# Example usage in a node\nclass QoSDemoNode(Node):\n    def __init__(self):\n        super().__init__('qos_demo_node')\n\n        # Publisher with reliable QoS\n        self.reliable_publisher = self.create_publisher(\n            String, 'reliable_topic', reliable_qos)\n\n        # Publisher with best effort QoS\n        self.best_effort_publisher = self.create_publisher(\n            String, 'best_effort_topic', best_effort_qos)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"launch-files",children:"Launch Files"}),"\n",(0,i.jsx)(n.p,{children:"Launch files allow you to start multiple nodes with a single command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="robot_launch.py"',children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='my_robot_package',\n            executable='sensor_fusion_node',\n            name='sensor_fusion',\n            parameters=[\n                {'param1': 'value1'},\n                {'param2': 'value2'}\n            ],\n            remappings=[\n                ('/original_topic', '/new_topic')\n            ]\n        ),\n        Node(\n            package='my_robot_package',\n            executable='navigation_node',\n            name='navigator'\n        )\n    ])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Node design"}),": Keep nodes focused on a single responsibility"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Topic naming"}),": Use descriptive, consistent naming conventions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Message types"}),": Use appropriate message types from standard ROS packages when possible"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Resource management"}),": Properly clean up resources in node destruction"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error handling"}),": Implement robust error handling in node callbacks"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"Nodes and topics form the foundation of ROS 2's distributed architecture. Understanding how to design nodes with appropriate topics and QoS settings is crucial for building robust robotic applications."}),"\n",(0,i.jsx)(t.A,{title:"ROS 2 Node Communication",description:"Shows multiple nodes communicating via topics with different QoS settings"})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}}}]);